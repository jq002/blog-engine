webpackJsonp([1],{"+4Nh":function(e,t){},"3riZ":function(e,t){},"4vxq":function(e,t){},"5s6V":function(e,t){},"8sJK":function(e,t){},AKZR:function(e,t){},ENLC:function(e,t){},FHlp:function(e,t){},KRpp:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("i8gr"),s=r("dOkV"),i=r.n(s),a=r("wi/X"),o=r.n(a),l=(r("ENLC"),r("4YfN")),c=r.n(l),u=r("9rMa"),f={data:function(){return{activeIndex:"/"}},computed:Object(u.d)(["user"]),created:function(){var e=this;this.activeIndex=this.$route.path,this.$router.afterEach(function(t,r){e.activeIndex=t.path})},methods:c()({handleSelect:function(e,t){console.log(e,t)}},Object(u.b)(["exit"]),{handleExit:function(){this.exit(),this.$api.AV.User.logOut(),this.$router.push({path:"/"}),this.$message.success("成功退出")}})},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal",router:!0},on:{select:e.handleSelect}},[r("el-menu-item",{attrs:{index:"/"}},[r("i",{staticClass:"fa fa-home",attrs:{"aria-hidden":"true"}}),e._v("琵琶")]),e._v(" "),r("el-submenu",{attrs:{index:"2"}},[r("template",{slot:"title"},[e._v("探索")]),e._v(" "),r("el-menu-item",{attrs:{index:"/article?type=all"}},[e._v("所有文章")]),e._v(" "),r("el-menu-item",{attrs:{index:"2-2"}},[e._v("图片")]),e._v(" "),r("el-menu-item",{attrs:{index:"2-3"}},[e._v("杂项")])],2),e._v(" "),e.user?[r("el-menu-item",{staticClass:"el-menu__loginout",attrs:{index:"6"},on:{click:e.handleExit}},[e._v(" 退出")]),e._v(" "),r("el-submenu",{staticClass:"el-menu__options",attrs:{index:"5"}},[r("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.user.getUsername()))]),e._v(" "),r("el-menu-item",{attrs:{index:"5-1"}},[e._v("个人中心")]),e._v(" "),r("el-menu-item",{attrs:{index:"/article/create"}},[e._v("发布文章")]),e._v(" "),r("el-menu-item",{attrs:{index:"/article?type=me"}},[e._v("我的文章")]),e._v(" "),r("el-menu-item",{attrs:{index:"/user/followee"}},[e._v("我的关注")]),e._v(" "),r("el-menu-item",{attrs:{index:"/user/follower"}},[e._v("我的粉丝")]),e._v(" "),r("el-menu-item",{attrs:{index:"/user/friend"}},[e._v("朋友圈")])],1)]:[r("el-menu-item",{staticClass:"el-menu__signup",attrs:{index:"/signup"}},[r("i",{staticClass:"fa fa-user-circle",attrs:{"aria-hidden":"true"}}),e._v("注册")]),e._v(" "),r("el-menu-item",{staticClass:"el-menu__login",attrs:{index:"/login"}},[r("i",{staticClass:"fa fa-paper-plane",attrs:{"aria-hidden":"true"}}),e._v("登录")])]],2)],1)},staticRenderFns:[]};var d={name:"App",components:{NavHeader:r("Z0/y")(f,m,!1,function(e){r("3riZ")},"data-v-02423d7c",null).exports},mounted:function(){this.$Progress.finish()},created:function(){var e=this;this.$Progress.start(),this.$router.beforeEach(function(t,r,n){if(void 0!==t.meta.progress){var s=t.meta.progress;e.$Progress.parseMeta(s)}e.$Progress.start(),n()}),this.$router.afterEach(function(e,t){})}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("vue-progress-bar"),this._v(" "),t("nav-header"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var v=r("Z0/y")(d,h,!1,function(e){r("+4Nh")},null,null).exports,p=r("zO6J"),g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("h1",[this._v(this._s(this.msg))]),this._v(" "),t("h2",[this._v("Essential Links")])])},staticRenderFns:[]};var _=r("Z0/y")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}},mounted:function(){this.$Progress.finish()}},g,!1,function(e){r("5s6V")},"data-v-ff374778",null).exports,y=r("a3Yh"),b={name:"List",data:function(){return{title:"",articles:[]}},created:function(){this.match()},watch:r.n(y)()({},"$route.query",function(){console.log("render"),this.articles=[],this.match()}),computed:Object(u.d)(["user"]),methods:{match:function(){var e=this.$route.query.type||this.$route.query.cid;switch(this.$Progress.start(),e){case"me":this.getMyArticles();break;case"all":this.getAllArticles();break;default:this.getCategoryArticles(e)}},getMyArticles:function(){this.title="我的文章";var e=this.query();e.equalTo("author",this.user),this.setArticles(e)},getAllArticles:function(){this.title="所有文章";var e=this.query();this.setArticles(e)},getCategoryArticles:function(e){var t=this.getCategoryObj(e),r=this.query();r.equalTo("category",t),this.setArticles(r)},getCategoryObj:function(e){return this.$api.AV.Object.createWithoutData("Category",e)},setArticles:function(e){var t=this;e.find().then(function(e){t.articles=e,t.$Progress.finish()}).catch(this.fail)},fail:function(e){this.$message.error(e),this.$Progress.fail()},query:function(){var e=new this.$api.AV.Query("Article");return e.include("category"),e.include("author"),e.descending("createdAt"),e}}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("header",[r("h2",[e._v(e._s(e.title))])]),e._v(" "),r("section",e._l(e.articles,function(t){return r("article",{key:t.id},[r("h3",[r("router-link",{attrs:{to:{name:"ArticleShow",params:{id:t.id}}}},[e._v("\n          "+e._s(t.get("title"))+"\n        ")]),e._v(" "),r("el-tag",{staticStyle:{float:"right"}},[e._v("作者："+e._s(t.get("author").get("username")))])],1),e._v(" "),r("div",{staticClass:"content",domProps:{innerHTML:e._s(t.get("content"))}})])}))])},staticRenderFns:[]};var C=r("Z0/y")(b,w,!1,function(e){r("FHlp")},"data-v-2af88fc0",null).exports,A={data:function(){var e=this;return{signForm:{pass:"",checkPass:"",username:"",email:""},signRules:{pass:[{validator:function(t,r,n){""===r?n(new Error("请输入密码")):(""!==e.signForm.checkPass&&e.$refs.signForm.validateField("checkPass"),n())},trigger:"blur"}],checkPass:[{validator:function(t,r,n){""===r?n(new Error("请再次输入密码")):r!==e.signForm.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}],username:[{required:!0,message:"请输入用户名"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"}]}}},mounted:function(){this.$Progress.finish()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r=new t.$api.AV.User;r.setUsername(t.signForm.username),r.setPassword(t.signForm.pass),r.setEmail(t.signForm.email),r.signUp().then(function(e){t.$store.dispatch("login",e),t.$router.go(-1),t.$message.success("注册成功")}).catch(function(e){console.error(e),t.$message.error(e.message)})})}}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h2",[e._v("注册")]),e._v(" "),r("el-form",{ref:"signForm",staticClass:"demo-ruleForm",attrs:{model:e.signForm,"status-icon":"",rules:e.signRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.signForm.username,callback:function(t){e.$set(e.signForm,"username",t)},expression:"signForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.signForm.pass,callback:function(t){e.$set(e.signForm,"pass",t)},expression:"signForm.pass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.signForm.checkPass,callback:function(t){e.$set(e.signForm,"checkPass",t)},expression:"signForm.checkPass"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.signForm.email,callback:function(t){e.$set(e.signForm,"email",t)},expression:"signForm.email"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("signForm")},click:function(t){e.submitForm("signForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var k=r("Z0/y")(A,x,!1,function(e){r("qCmn")},"data-v-4bf0a59a",null).exports,F={data:function(){return{user:{pass:"",username:""},signRules:{pass:[{required:!0,message:"请输入密码"}],username:[{required:!0,message:"请输入用户名"}]}}},mounted:function(){this.$Progress.finish()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$api.AV.User.logIn(t.user.username,t.user.pass).then(function(e){t.$store.dispatch("login",e),t.$router.push({path:"/"}),t.$message.success("登录成功")}).catch(function(e){console.error(e),t.$message.error(e.message)})})}}},E={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h2",[e._v("登录")]),e._v(" "),r("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.user,"status-icon":"",rules:e.signRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"pass"}},[r("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.user.pass,callback:function(t){e.$set(e.user,"pass",t)},expression:"user.pass"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm("loginForm")},click:function(t){e.submitForm("loginForm")}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var P=r("Z0/y")(F,E,!1,function(e){r("AKZR")},"data-v-43d6ced3",null).exports,V=null,L={name:"create",data:function(){return{categorys:[],form:{category:null,title:""},rules:{title:[{required:!0,message:"必须填写标题哦！",trigger:"blur"}],category:[{type:"object",required:!0,message:"必须填写分类哦！",trigger:"blur"}]},validate:{error:!1}}},computed:c()({},Object(u.c)(["uid","uname"]),Object(u.d)(["user"])),created:function(){this.getCategory()},mounted:function(){this.initEditor()},methods:{content:function(){return V.txt.html()},initEditor:function(){var e=this,t=window.wangEditor;(V=new t("#editor")).create(),V.onchange=function(){e.validateContent()}},getCategory:function(){var e=this;new this.$api.AV.Query("Category").find().then(function(t){e.categorys=t,e.form.category=t[0],e.$Progress.finish()}).catch(console.error)},validateContent:function(){return"<p><br></p>"==this.content()?(this.validate.error=!0,$(".wangEditor-container").css({borderColor:"red"}),!1):(this.validate.error=!1,$(".wangEditor-container").css({borderColor:"#ccc"}),!0)},createArticle:function(){var e=new this.$api.AV.Object("Article");return e.set("author",this.user),e.set("title",this.form.title),e.set("content",this.content()),e.set("category",this.form.category),e},setACL:function(e){var t=new this.$api.AV.ACL;t.setPublicReadAccess(!0),t.setWriteAccess(this.user,!0),e.setACL(t)},save:function(e){var t=this;e.save().then(function(e){var r="文章《"+e.get("title")+"》发布成功";t.$message({message:r,type:"success"}),t.$router.replace({name:"ArticleShow",params:{id:e.id}}),t.sendMessage(e)}).catch(console.error)},submit:function(){var e=this;this.$refs.form.validate(function(t){var r=e.validateContent();if(!t||!r)return console.log("error submit!!!"),e.$message.error("您填写的信息有误，请按照提示修改"),!1;var n=e.createArticle();e.setACL(n),e.save(n)})},sendMessage:function(e){var t=new this.$api.AV.Status(null,this.uname+"发布了《"+e.get("title")+"》文章");t.set("article",e),t.set("articleTitle",e.get("title")),this.$api.AV.Status.sendStatusToFollowers(t).then(function(e){console.dir(e)},function(e){console.dir(e)})}}},S={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",{staticClass:"title is-3"},[e._v("发布一篇新的文章")]),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"文章分类",prop:"category"}},[r("el-select",{attrs:{"value-key":"id",placeholder:"请选择文章分类"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categorys,function(e){return r("el-option",{key:e.id,attrs:{label:e.get("name"),value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("div",{staticClass:"el-form-item is-required",class:{"is-error":e.validate.error}},[r("label",{staticClass:"el-form-item__label"},[e._v("文章内容")]),e._v(" "),r("div",{staticClass:"el-form-item__content"},[r("div",{attrs:{id:"editor"}}),e._v(" "),e.validate.error?r("div",{staticClass:"el-form-item__error"},[e._v("正文则能没有内容呢？")]):e._e()])]),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submit,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}}},[e._v("发布文章")])],1)],1)],1)},staticRenderFns:[]};var q=r("Z0/y")(L,S,!1,function(e){r("QdXu")},null,null).exports,R={name:"show",data:function(){return{article:null,follow:!1}},computed:c()({},Object(u.c)(["uid"])),created:function(){var e=this.$route.params.id;this.getArticle(e)},methods:{isFollow:function(e){var t=this;this.$api.AV.User.current().followeeQuery().find().then(function(r){t.follow=r.some(function(t){return t.id==e}),t.$Progress.finish()})},toFollow:function(){var e=this,t=this.article.get("author").id;this.$api.AV.User.current().follow(t).then(function(){e.follow=!0,e.$message({type:"success",message:"已关注"})},function(e){console.dir(e)})},toEdit:function(){this.$router.replace({name:"ArticleEdit",params:{id:this.article.id}})},getArticle:function(e){var t=this,r=new this.$api.AV.Query("Article");r.include("category"),r.include("author"),r.get(e).then(function(e){t.article=e,t.uid&&t.uid!=e.get("author").id?t.isFollow(t.article.get("author").id):t.$Progress.finish()}).catch(console.log)},destroy:function(){var e=this;this.article.destroy().then(function(){e.$message({type:"success",message:"刪除成功"}),e.$router.replace({path:"/article?type=all"})})}}},U={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.article?[r("h3",[e._v(e._s(e.article.get("title")))]),e._v(" "),e.uid?[e.uid==e.article.get("author").id?r("div",{staticClass:"oprate"},[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.toEdit}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.destroy}})],1):r("div",{staticClass:"oprate"},[e.follow?r("el-button",{attrs:{type:"info",round:""}},[e._v("已关注")]):r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",round:""},on:{click:e.toFollow}},[e._v("关注")])],1)]:e._e(),e._v(" "),r("div",{staticClass:"content",domProps:{innerHTML:e._s(e.article.get("content"))}})]:e._e()],2)},staticRenderFns:[]};var j=r("Z0/y")(R,U,!1,function(e){r("W15M")},null,null).exports,Z=r("rVsN"),O=r.n(Z),Q=null,M={name:"edit",data:function(){return{categorys:[],article:null,form:{category:null,title:""},rules:{title:[{required:!0,message:"必须填写标题哦！",trigger:"blur"}],category:[{type:"object",required:!0,message:"必须填写分类哦！",trigger:"blur"}]},validate:{error:!1}}},computed:Object(u.d)(["user"]),created:function(){this.getCategory(),this.getArticle()},mounted:function(){this.initEditor()},methods:{initEditor:function(){var e=this,t=window.wangEditor;(Q=new t("#editor")).create(),Q.onchange=function(){e.validateContent()}},getContent:function(){return Q.txt.html()},setContent:function(e){Q.txt.html(e)},wait:function(e){return console.log(e),new O.a(function(t,r){var n=null;e?t():n=setInterval(function(){e&&(t(),clearInterval(n))},500)})},getArticle:function(){var e=this,t=this.$route.params.id,r=new this.$api.AV.Query("Article");r.include("category"),r.include("author"),r.get(t).then(function(t){e.article=t,e.form.title=t.get("title"),e.form.category=t.get("category"),e.wait(Q).then(function(){e.setContent(e.article.get("content"))}),e.$Progress.finish()}).catch(console.log)},getCategory:function(){var e=this;new this.$api.AV.Query("Category").find().then(function(t){e.categorys=t}).catch(console.error)},validateContent:function(){return"<p><br></p>"==this.getContent()?(this.validate.error=!0,$(".wangEditor-container").css({borderColor:"red"}),!1):(this.validate.error=!1,$(".wangEditor-container").css({borderColor:"#ccc"}),!0)},setArticle:function(){var e=this.article;return e.set("author",this.user),e.set("title",this.form.title),e.set("content",this.getContent()),e.set("category",this.form.category),e},setACL:function(e){var t=new this.$api.AV.ACL;t.setPublicReadAccess(!0),t.setWriteAccess(this.user,!0),e.setACL(t)},save:function(e){var t=this;e.save().then(function(e){console.log(e);var r="文章《"+e.get("title")+"》修改成功";t.$message({message:r,type:"success"}),t.$router.replace({name:"ArticleShow",params:{id:e.id}})}).catch(console.error)},submit:function(){var e=this;this.$refs.form.validate(function(t){var r=e.validateContent();if(!t||!r)return console.log("error submit!!!"),e.$message.error("您填写的信息有误，请按照提示修改"),!1;var n=e.setArticle();e.setACL(n),e.save(n)})}}},H={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.article?r("h3",{staticClass:"title is-3"},[e._v(e._s(e.article.get("title")))]):e._e(),e._v(" "),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"}},[r("el-form-item",{attrs:{label:"文章分类",prop:"category"}},[r("el-select",{attrs:{"value-key":"id",placeholder:"请选择文章分类"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categorys,function(e){return r("el-option",{key:e.id,attrs:{label:e.get("name"),value:e}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("div",{staticClass:"el-form-item is-required",class:{"is-error":e.validate.error}},[r("label",{staticClass:"el-form-item__label"},[e._v("文章内容")]),e._v(" "),r("div",{staticClass:"el-form-item__content"},[r("div",{attrs:{id:"editor"}}),e._v(" "),e.validate.error?r("div",{staticClass:"el-form-item__error"},[e._v("正文则能没有内容呢？")]):e._e()])]),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submit,keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}}},[e._v("修改文章")])],1)],1)],1)},staticRenderFns:[]};var N=r("Z0/y")(M,H,!1,function(e){r("KRpp")},null,null).exports,I={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",[e._v("我的粉丝")]),e._v(" "),e._l(e.followers,function(t){return r("div",{key:t.id},[e._v("\n      "+e._s(t.get("username"))+"\n    ")])})],2)},staticRenderFns:[]};var T=r("Z0/y")({name:"follower",data:function(){return{followers:[]}},created:function(){this.followerList()},methods:{followerList:function(){var e=this,t=this.$api.AV.User.current().followerQuery();t.include("follower"),t.find().then(function(t){e.followers=t,e.$Progress.finish()})}}},I,!1,function(e){r("4vxq")},null,null).exports,W={name:"followee",data:function(){return{articles:[],followees:[]}},created:function(){this.followeeList()},methods:{followeeList:function(){var e=this,t=this.$api.AV.User.current().followeeQuery();t.include("followee"),t.find().then(function(t){e.followees=t,e.$Progress.finish()})},cancelFollow:function(e,t){var r=this;this.$api.AV.User.current().unfollow(e).then(function(){r.followees.splice(t,1),r.$message({type:"success",message:"已取消关注"})},function(e){console.dir(e)})},open:function(e){var t=this;this.$prompt("to:"+e.get("username"),"发送私信",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(r){var n=r.value;t.sendPrivate(e,n)}).catch(function(){})},sendPrivate:function(e,t){var r=this,n=new this.$api.AV.Status(null,t);this.$api.AV.Status.sendPrivateStatus(n,e.id).then(function(e){console.dir(e),r.$message({type:"success",message:"私信发送成功"})},function(e){console.dir(e)})}}},K={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",[e._v("我的关注")]),e._v(" "),e._l(e.followees,function(t,n){return r("el-card",{key:t.id,staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(t.get("username")))]),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0",margin:"0 10px"},attrs:{type:"text"},on:{click:function(r){e.cancelFollow(t,n)}}},[e._v("取消关注")]),e._v(" "),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{plain:""},on:{click:function(r){e.open(t)}}},[e._v("发送私信")])],1),e._v(" "),r("div",[r("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.get("email")))])],1)])})],2)},staticRenderFns:[]};var z=r("Z0/y")(W,K,!1,function(e){r("fa0x")},"data-v-a86ead74",null).exports,J={name:"friend",data:function(){return{statuses:[],pStatuses:[]}},created:function(){this.getDefaultStatus(),this.getPrivateStatus()},methods:{getDefaultStatus:function(){var e=this;this.$api.AV.Status.inboxQuery(this.$api.AV.User.current()).find().then(function(t){console.log(t),e.statuses=t,e.$Progress.finish()},function(e){console.dir(e)})},getPrivateStatus:function(){var e=this;this.$api.AV.Status.inboxQuery(this.$api.AV.User.current(),"private").find().then(function(t){console.log(t),e.pStatuses=t,e.$Progress.finish()},function(e){console.dir(e)})}}},X={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("h3",[e._v("朋友圈")]),e._v(" "),r("ul",e._l(e.statuses,function(t){return r("li",{key:t.id},[e._v(e._s(t.data.message)),r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.createdAt))])],1)})),e._v(" "),r("h4",[e._v("我的消息")]),e._v(" "),r("ul",e._l(e.pStatuses,function(t){return r("li",{key:t.id},[e._v("\n          "+e._s(t.data.message)+"\n           "),r("el-button",{attrs:{type:"primary",plain:""}},[e._v("回复私信")]),e._v(" "),r("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.createdAt))])],1)}))])},staticRenderFns:[]};var Y=r("Z0/y")(J,X,!1,function(e){r("gePi")},null,null).exports;n.default.use(p.a);var B=new p.a({routes:[{path:"/",name:"HelloWorld",component:_},{path:"/article",name:"ArticleList",component:C},{path:"/signup",name:"Signup",component:k},{path:"/login",name:"Login",component:P},{path:"/article/show/:id",name:"ArticleShow",component:j},{path:"/article/create",name:"ArticleCreate",component:q,meta:{needLogin:!0}},{path:"/article/edit/:id",name:"ArticleEdit",component:N,meta:{needLogin:!0}},{path:"/user/follower",name:"Follower",component:T,meta:{needLogin:!0}},{path:"/user/followee",name:"Followee",component:z,meta:{needLogin:!0}},{path:"/user/friend",name:"Friend",component:Y,meta:{needLogin:!0}}]});n.default.use(u.a);var D=new u.a.Store({state:{user:null},getters:{uid:function(e){var t=e.user;return!!t&&t.id},uname:function(e){var t=e.user;return!!t&&t.get("username")}},mutations:{setUser:function(e,t){e.user=t}},actions:{exit:function(e){e.commit("setUser",null)},login:function(e,t){e.commit("setUser",t)}}}),G=r("Hfy8"),ee=r.n(G);ee.a.init({appId:"YG422dxIB7yfERhmRdQaNP9a-gzGzoHsz",appKey:"q7WQJKsigX3M3j9byMP3q8XQ"});var te={AV:ee.a};r("8sJK");n.default.config.productionTip=!1,B.beforeEach(function(e,t,r){e.matched.some(function(e){return e.meta.needLogin})?D.state.user?r():(ne.$message.error("请先登录"),r({path:"/login"})):r()}),n.default.mixin({beforeCreate:function(){this.$api||(this.$api=te)}});var re=te.AV.User.current();re&&D.commit("setUser",re);n.default.use(i.a,{color:"#bffaf3",failedColor:"#874b4b",thickness:"5px",transition:{speed:"0.2s",opacity:"0.6s",termination:300},autoRevert:!0,location:"top",inverse:!1}),n.default.use(o.a);var ne=new n.default({el:"#app",router:B,store:D,render:function(e){return e(v)}})},QdXu:function(e,t){},W15M:function(e,t){},fa0x:function(e,t){},gePi:function(e,t){},qCmn:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.90d7a2615cb67eee52cb.js.map